{% extends 'base.html.twig' %}

{% block title %}
    {{ instance.data.title }} - {{ parent() }}
{% endblock %}

{% block meta %}
    <meta property="og:url" content="{{ url('instance_view', {'publicKey': instance.data.publicKey}) }}"/>
    <meta property="og:title" content="{{ instance.data.title }}"/>
    <meta property="og:description" content="Real-time update"/>
    <meta property="og:site_name" content="IsItYet"/>
    {#<meta property="og:image" content="{{ cdn ~ macro.id ~ '.png' }}"/>#}
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {% if app.environment == 'prod' %}
        <!-- prod:instance.css -->
<link rel="stylesheet" href="/compiled/css/instance.css/instance.css" />
<!-- endbuild -->
    {% else %}
        <!-- dev:instance.css -->
<link rel="stylesheet" href="/compiled_dev/css/instance.css/instance_0.css" />
<!-- endbuild -->
    {% endif %}
{% endblock %}

{% block javascript_head %}
    var ws_url = "ws://{{ app.request.httpHost }}:{{ ws_port }}";
    var instanceData = {{ instance | serialize('json') | raw }};
{% endblock %}

{% block react %}
{% if app.environment == 'prod' %}
<!-- prod:app-instance.js -->
<script src="/compiled/js/app-instance.js/app-instance.js"></script>
<!-- endbuild -->
{% else %}
<!-- dev:app-instance.js -->
<script src="/compiled_dev/jsx/app-instance.js/app-instance.js"></script>
<!-- endbuild -->
    {% endif %}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {% include ":mixins:sharing.html.twig" %}
{% endblock %}

{% block body %}
    <div class="wrap">
        <div class="main" id="instance">
            {% block main %}
            {% endblock %}
        </div>
    </div>
{% endblock %}

{% block footer %}
    <p>Powered by <a href="{{ path('home') }}">IsItYet</a> - <a href="{{ path('app') }}">Create your own page</a></p>
    </div>
{% endblock %}